<!DOCTYPE html>
<html>
  <head>
    <title>Motivating Example</title>
    <meta charset="utf-8">
    <meta name="author" content="Haley Jeppson, Sam Tyner" />
    <link href="libs/remark-css-0.0.1/example.css" rel="stylesheet" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Motivating Example
### Haley Jeppson, Sam Tyner

---


## Motivating Example

- Kick off the workshop by exploring a real data set using R!
--


- Goal: get the flavor of using R for data management and exploration
--


- Don't worry about understanding all the coding right away

- We will go back and explain how it all works in detail

---
## Getting Started

Let's begin by installing and loading `tidyverse`:


```r
install.packages("tidyverse")
library(tidyverse)
```



This workshop will focus largely on a group of packages that live together under the name `tidyverse`. 

`tidyverse` includes the following well known packages:

- `ggplot2`
- `dplyr`
- `tidyr`
- `readr`
- and more!

---

## Tips Dataset

- Tips data set recorded by a server in a restaurant over a span of about 10 weeks

- Server recorded several **variables** about groups they served:

    - Amount they were tipped
    - Cost of the total bill
    - Several characteristics about the groups being served
    
- **Primary Question**: How do these variable influence the amount being tipped?

.footnote[
Follow along using [2-MotivatingExample.R](../code/2-MotivatingExample.R)
]
---
## First look at data in R

Lets use R to look at the top few rows of the tips data set. First, we load tip using `read_csv`:


```r
tips &lt;- read_csv("http://heike.github.io/rwrks/01-r-intro/data/tips.csv")
```

Now, we use the `head` function to look at the first 6 rows of the data:


```r
head(tips)
```

```
## # A tibble: 6 x 7
##   total_bill   tip sex    smoker day   time    size
##        &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;  &lt;int&gt;
## 1       17.0  1.01 Female No     Sun   Dinner     2
## 2       10.3  1.66 Male   No     Sun   Dinner     3
## 3       21.0  3.50 Male   No     Sun   Dinner     3
## 4       23.7  3.31 Male   No     Sun   Dinner     2
## 5       24.6  3.61 Female No     Sun   Dinner     4
## 6       25.3  4.71 Male   No     Sun   Dinner     4
```

---
## Tips Data: Attributes

How big is this data set and what types of variables are in each column?


```r
str(tips)
```

```
## Classes 'tbl_df', 'tbl' and 'data.frame':	244 obs. of  7 variables:
##  $ total_bill: num  17 10.3 21 23.7 24.6 ...
##  $ tip       : num  1.01 1.66 3.5 3.31 3.61 4.71 2 3.12 1.96 3.23 ...
##  $ sex       : chr  "Female" "Male" "Male" "Male" ...
##  $ smoker    : chr  "No" "No" "No" "No" ...
##  $ day       : chr  "Sun" "Sun" "Sun" "Sun" ...
##  $ time      : chr  "Dinner" "Dinner" "Dinner" "Dinner" ...
##  $ size      : int  2 3 3 2 4 4 2 4 2 2 ...
##  - attr(*, "spec")=List of 2
##   ..$ cols   :List of 7
##   .. ..$ total_bill: list()
##   .. .. ..- attr(*, "class")= chr  "collector_double" "collector"
##   .. ..$ tip       : list()
##   .. .. ..- attr(*, "class")= chr  "collector_double" "collector"
##   .. ..$ sex       : list()
##   .. .. ..- attr(*, "class")= chr  "collector_character" "collector"
##   .. ..$ smoker    : list()
##   .. .. ..- attr(*, "class")= chr  "collector_character" "collector"
##   .. ..$ day       : list()
##   .. .. ..- attr(*, "class")= chr  "collector_character" "collector"
##   .. ..$ time      : list()
##   .. .. ..- attr(*, "class")= chr  "collector_character" "collector"
##   .. ..$ size      : list()
##   .. .. ..- attr(*, "class")= chr  "collector_integer" "collector"
##   ..$ default: list()
##   .. ..- attr(*, "class")= chr  "collector_guess" "collector"
##   ..- attr(*, "class")= chr "col_spec"
```

---
## Tips: Variables

Let's get a summary of the values for each variable in tips:


```r
summary(tips)
```

```
##    total_bill         tip             sex               smoker         
##  Min.   : 3.07   Min.   : 1.000   Length:244         Length:244        
##  1st Qu.:13.35   1st Qu.: 2.000   Class :character   Class :character  
##  Median :17.80   Median : 2.900   Mode  :character   Mode  :character  
##  Mean   :19.79   Mean   : 2.998                                        
##  3rd Qu.:24.13   3rd Qu.: 3.562                                        
##  Max.   :50.81   Max.   :10.000                                        
##      day                time                size     
##  Length:244         Length:244         Min.   :1.00  
##  Class :character   Class :character   1st Qu.:2.00  
##  Mode  :character   Mode  :character   Median :2.00  
##                                        Mean   :2.57  
##                                        3rd Qu.:3.00  
##                                        Max.   :6.00
```

---
## Scatterplots

Lets look at the relationship between total bill and tip value.  


```r
ggplot(tips, aes(x = total_bill, y = tip)) + geom_point()
```

![](2-MotivatingExample_files/figure-html/unnamed-chunk-7-1.png)&lt;!-- --&gt;

---
## More Scatterplots

Color the points by lunch and dinner groups


```r
ggplot(tips, aes(x = total_bill, y = tip, colour = time)) + geom_point()
```

![](2-MotivatingExample_files/figure-html/unnamed-chunk-8-1.png)&lt;!-- --&gt;

---
## Even More Scatterplots

Add linear regression line to the plot


```r
ggplot(tips, aes(x = total_bill, y = tip)) + 
  geom_point() + 
  geom_smooth(method = "lm")
```

![](2-MotivatingExample_files/figure-html/unnamed-chunk-9-1.png)&lt;!-- --&gt;

---
## Rate of Tipping

Tipping is generally based on a percentage of the total bill. 

We will make a new variable in the data: `tipping rate = tip / total bill`


```r
tips &lt;- tips %&gt;% 
  mutate(rate = tip / total_bill)

summary(tips$rate)
```

```
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
## 0.03564 0.12913 0.15477 0.16080 0.19148 0.71034
```

---
## Tipping Rate Histogram

Lets look distribution of tipping rate values with a histogram


```r
ggplot(tips) + geom_histogram(aes(x = rate), binwidth = .01)
```

![](2-MotivatingExample_files/figure-html/unnamed-chunk-11-1.png)&lt;!-- --&gt;

---
## Someone is an AMAZING tipper...

One person tipped over 70%, who are they?


```r
tips[which.max(tips$rate),]
```

```
## # A tibble: 1 x 8
##   total_bill   tip sex   smoker day   time    size  rate
##        &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;  &lt;int&gt; &lt;dbl&gt;
## 1       7.25  5.15 Male  Yes    Sun   Dinner     2 0.710
```

---
## Rates by Gender

Look at the average tipping rate for men and women seperately

.pull-left[
Using base `R`:


```r
mean(tips$rate[tips$sex == "Female"])
```

```
## [1] 0.1664907
```

```r
mean(tips$rate[tips$sex == "Male"])
```

```
## [1] 0.1576505
```
]
.pull-right[
Using `tidyverse`:


```r
tips %&gt;% 
  group_by(sex) %&gt;% 
  summarize(mean_rate = mean(rate))
```

```
## # A tibble: 2 x 2
##   sex    mean_rate
##   &lt;chr&gt;      &lt;dbl&gt;
## 1 Female     0.166
## 2 Male       0.158
```
]
---
## Statistical Significance

There is a difference but is it statistically significant?


```r
t.test(rate ~ sex, data = tips)
```

```
## 
## 	Welch Two Sample t-test
## 
## data:  rate by sex
## t = 1.1433, df = 206.76, p-value = 0.2542
## alternative hypothesis: true difference in means is not equal to 0
## 95 percent confidence interval:
##  -0.006404119  0.024084498
## sample estimates:
## mean in group Female   mean in group Male 
##            0.1664907            0.1576505
```

---
## Boxplots

Perhaps we are interested in if smokers tip at a different rate than non-smokers.  We could compare the rate values of each group with a side by side boxplot!


```r
ggplot(tips) + geom_boxplot(aes(smoker, rate))
```

![](2-MotivatingExample_files/figure-html/unnamed-chunk-16-1.png)&lt;!-- --&gt;

&lt;!--
## Boxplots Again

What about the difference between male and female smokers and non-smokers?


```r
qplot(smoker, rate, geom = "boxplot", data = tips, color = sex)
```

![](2-MotivatingExample_files/figure-html/unnamed-chunk-17-1.png)&lt;!-- --&gt;
--&gt; 

---
class: inverse

## Your Turn 

Try playing with chunks of code from this session to further investigate the tips data:

1. Get a summary of the total bill values

2. Make side by side boxplots of tip rates for different days of the week

3. Find the average tip value for smokers
    </textarea>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {window.dispatchEvent(new Event('resize'));});
(function() {var d = document, s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler"); if (!r) return; s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }"; d.head.appendChild(s);})();</script>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre']
  }
});
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
